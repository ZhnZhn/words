{"version":3,"sources":["../../../src/flux/watch-list/WithLogicDnD.js"],"names":["crAlertItemExisted","crAlertListExisted","findGroup","findList","findIndex","isInArraySameCaption","filter","insertItemInArray","WithLogicDnD","dragDropItem","watchList","dragId","dropId","split","dragGroupId","dragListId","dragItemId","dragGroup","dragList","dragIndex","items","dragItem","dropGroupId","dropListId","dropItemId","dropGroup","dropList","dropIndex","caption","isDone","dragDropList","dragGroupCaption","dragListCaption","dropGroupCaption","dropListCaption","lists","dragDropGroup","groups"],"mappings":"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","file":"WithLogicDnD.js","sourcesContent":["import LogicFn from './LogicFn';\r\n\r\nconst {\r\n  crAlertItemExisted,\r\n  crAlertListExisted,\r\n\r\n  findGroup,\r\n  findList,\r\n  findIndex,\r\n\r\n  isInArraySameCaption,\r\n  filter,\r\n  insertItemInArray\r\n} = LogicFn;\r\n\r\nconst WithLogicDnD = {\r\n\r\n  dragDropItem(watchList, {dragId, dropId}){\r\n\r\n    const [\r\n           dragGroupId,\r\n           dragListId,\r\n           dragItemId\r\n          ] = dragId.split(';')\r\n        , dragGroup = findGroup(watchList, dragGroupId)\r\n        , dragList = findList(dragGroup, dragListId)\r\n        , dragIndex = findIndex(dragList.items, dragItemId)\r\n        , dragItem = dragList.items[dragIndex];\r\n\r\n    const [\r\n           dropGroupId,\r\n           dropListId,\r\n           dropItemId\r\n         ] = dropId.split(';')\r\n        , dropGroup = findGroup(watchList, dropGroupId)\r\n        , dropList = findList(dropGroup, dropListId)\r\n        , dropIndex = (dropItemId)\r\n             ? findIndex(dropList.items, dropItemId)\r\n             : 0;\r\n\r\n    //dragArr[3] => dragArr[2]\r\n    if ( dragList.caption !== dropList.caption\r\n         && isInArraySameCaption(\r\n              dropList.items, dragItemId\r\n            )\r\n      )\r\n    {\r\n        return crAlertItemExisted(\r\n          dropListId, dragItemId\r\n        );\r\n    }\r\n\r\n    dragList.items = filter(dragList.items, dragItemId)\r\n    dropList.items = insertItemInArray(dragItem, dropIndex, dropList.items);\r\n\r\n    return { isDone: true };\r\n  },\r\n\r\n  dragDropList(watchList, {dragId, dropId}){\r\n    const [ dragGroupCaption, dragListCaption ] = dragId.split(';')\r\n        , dragGroup = findGroup(watchList, dragGroupCaption)\r\n        , dragList = findList(dragGroup, dragListCaption);\r\n\r\n    const [ dropGroupCaption, dropListCaption ] = dropId.split(';')\r\n        , dropGroup = findGroup(watchList, dropGroupCaption)\r\n        , dropIndex = (dropListCaption)\r\n              ? findIndex(dropGroup.lists, dropListCaption)\r\n              : 0;\r\n\r\n    if ( dragGroup.caption !== dropGroup.caption &&\r\n         isInArraySameCaption(dropGroup.lists, dragListCaption) )\r\n    {\r\n      return crAlertListExisted(\r\n        dropGroupCaption,\r\n        dragListCaption\r\n      );\r\n    }\r\n\r\n    dragGroup.lists = filter(dragGroup.lists, dragListCaption);\r\n    dropGroup.lists = insertItemInArray(dragList, dropIndex, dropGroup.lists);\r\n\r\n    return { isDone : true };\r\n  },\r\n\r\n  dragDropGroup(watchList, {dragId, dropId}){\r\n     const [ dragGroupCaption ] = dragId.split(';')\r\n         , dragGroup = findGroup(watchList, dragGroupCaption)\r\n\r\n         , [ dropGroupCaption ] = dropId.split(';')\r\n         , dropIndex = (dropGroupCaption)\r\n               ? findIndex(watchList.groups, dropGroupCaption)\r\n               : 0;\r\n\r\n      watchList.groups = filter(watchList.groups, dragGroupCaption);\r\n      watchList.groups = insertItemInArray(dragGroup, dropIndex, watchList.groups)\r\n\r\n      return { isDone: true };\r\n  }\r\n\r\n};\r\n\r\nexport default WithLogicDnD\r\n"]}