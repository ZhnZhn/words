{"version":3,"sources":["../../../../src/components/watch-browser/decorators/withDnDItem.js"],"names":["_crDragStartItem","DRAG","ev","groupCaption","listCaption","caption","dragStartWithDnDStyle","LIST","ITEM","setTransferTo","event","dragId","xType","_crDropItem","WatchActions","dropWithDnDStyle","dataText","dataTransfer","getData","undefined","JSON","parse","data","dropId","preventDefault","dragDropItem","_crDragEnterItem","dragEnterWithDnDStyle","_handlerDragOverItem","_handlerDragLeaveItem","dragLeaveWithDnDStyle","withDnDItem","target","Object","assign","prototype","_handlerDragStartItem","_handlerDropItem","_handlerDragEnterItem"],"mappings":";;;;;;AACA;;;;;;AAEA,IAAMA,mBAAmB,SAAnBA,gBAAmB,CAACC,IAAD,EAAU;AACjC,SAAO,gBAA+CC,EAA/C,EAAkD;AAAA,QAAxCC,YAAwC,QAAxCA,YAAwC;AAAA,QAA1BC,WAA0B,QAA1BA,WAA0B;AAAA,QAAbC,OAAa,QAAbA,OAAa;;AACvD,SAAKC,qBAAL,CAA2BJ,EAA3B,EAA+B,CAACD,KAAKM,IAAN,EAAYN,KAAKO,IAAjB,CAA/B;AACA,oBAAMC,aAAN,CAAoB;AAClBC,aAAOR,EADW;AAElBS,cAAWR,YAAX,SAA2BC,WAA3B,SAA0CC,OAFxB;AAGlBO,aAAOX,KAAKO;AAHM,KAApB;AAKD,GAPD;AAQD,CATD;;AAWA,IAAMK,cAAc,SAAdA,WAAc,CAACZ,IAAD,EAAOa,YAAP,EAAwB;AAC1C,SAAO,iBAAiDZ,EAAjD,EAAoD;AAAA,QAAzCC,YAAyC,SAAzCA,YAAyC;AAAA,QAA3BC,WAA2B,SAA3BA,WAA2B;AAAA,QAAdC,OAAc,SAAdA,OAAc;;AACxD,SAAKU,gBAAL,CAAsBb,EAAtB;AACA,QAAMc,WAAWd,GAAGe,YAAH,CAAgBC,OAAhB,CAAwB,MAAxB,CAAjB;AACA,QAAI,CAACF,QAAL,EAAc;AACZ,aAAOG,SAAP;AACD;;AAEK,eAAOC,KAAKC,KAAL,CAAWL,QAAX,CAAP;AAAA,QACEJ,KADF,GACoBU,IADpB,CACEV,KADF;AAAA,QACSD,MADT,GACoBW,IADpB,CACSX,MADT;AAAA,QAEAY,MAFA,GAEYpB,YAFZ,SAE4BC,WAF5B,SAE2CC,OAF3C;;;AAIN,QAAIO,UAAUX,KAAKO,IAAnB,EAAyB;AACvB,UAAKG,WAAWY,MAAhB,EAAwB;AACtBrB,WAAGsB,cAAH;AACAV,qBAAaW,YAAb,CAA0B;AACxBd,kBAASA,MADe;AAExBY,kBAASA;AAFe,SAA1B;AAIF,OANA,MAMM;AACL,eAAOJ,SAAP;AACD;AACF;AACF,GAtBD;AAuBD,CAxBD;;AA0BA,IAAMO,mBAAmB,SAAnBA,gBAAmB,CAACzB,IAAD,EAAU;AACjC,SAAO,UAASC,EAAT,EAAY;AACjBA,OAAGsB,cAAH;AACA,SAAKG,qBAAL,CAA2BzB,EAA3B,EAA+BD,KAAKO,IAApC;AACF,GAHA;AAID,CALD;;AAOA,IAAMoB,uBAAuB,SAAvBA,oBAAuB,CAAS1B,EAAT,EAAY;AACtCA,KAAGsB,cAAH;AACF,CAFD;;AAIA,IAAMK,wBAAwB,SAAxBA,qBAAwB,CAAS3B,EAAT,EAAY;AACvCA,KAAGsB,cAAH;AACA,OAAKM,qBAAL,CAA2B5B,EAA3B;AACF,CAHD;;AAKA,IAAM6B,cAAc,SAAdA,WAAc,CAAC9B,IAAD,EAAOa,YAAP,EAAwB;AAC1C,SAAO,UAACkB,MAAD,EAAY;AACjBC,WAAOC,MAAP,CAAcF,OAAOG,SAArB,EAAgC;AAC9BC,6BAAuBpC,iBAAiBC,IAAjB,CADO;AAE9BoC,wBAAkBxB,YAAYZ,IAAZ,EAAkBa,YAAlB,CAFY;AAG9BwB,6BAAuBZ,iBAAiBzB,IAAjB,CAHO;AAI9B2B,4BAAsBA,oBAJQ;AAK9BC,6BAAuBA;AALO,KAAhC;AAOD,GARD;AASD,CAVD;;kBAYeE,W","file":"withDnDItem.js","sourcesContent":["\r\nimport fnDnD from './fnDnD'\r\n\r\nconst _crDragStartItem = (DRAG) => {\r\n  return function({groupCaption, listCaption, caption}, ev){\r\n    this.dragStartWithDnDStyle(ev, [DRAG.LIST, DRAG.ITEM])\r\n    fnDnD.setTransferTo({\r\n      event: ev,\r\n      dragId: `${groupCaption};${listCaption};${caption}`,\r\n      xType: DRAG.ITEM\r\n    })\r\n  };\r\n};\r\n\r\nconst _crDropItem = (DRAG, WatchActions) => {\r\n  return function({ groupCaption, listCaption, caption }, ev){\r\n     this.dropWithDnDStyle(ev)\r\n     const dataText = ev.dataTransfer.getData(\"text\");\r\n     if (!dataText){\r\n       return undefined;\r\n     }\r\n\r\n     const data = JSON.parse(dataText)\r\n         , { xType, dragId } = data\r\n         , dropId = `${groupCaption};${listCaption};${caption}`;\r\n\r\n     if (xType === DRAG.ITEM) {\r\n       if ( dragId !== dropId) {\r\n         ev.preventDefault()\r\n         WatchActions.dragDropItem({\r\n           dragId : dragId,\r\n           dropId : dropId\r\n         })\r\n      } else {\r\n        return undefined;\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nconst _crDragEnterItem = (DRAG) => {\r\n  return function(ev){\r\n    ev.preventDefault()\r\n    this.dragEnterWithDnDStyle(ev, DRAG.ITEM)\r\n };\r\n};\r\n\r\nconst _handlerDragOverItem = function(ev){\r\n   ev.preventDefault()\r\n};\r\n\r\nconst _handlerDragLeaveItem = function(ev){\r\n   ev.preventDefault()\r\n   this.dragLeaveWithDnDStyle(ev)\r\n};\r\n\r\nconst withDnDItem = (DRAG, WatchActions) => {\r\n  return (target) => {\r\n    Object.assign(target.prototype, {\r\n      _handlerDragStartItem: _crDragStartItem(DRAG),\r\n      _handlerDropItem: _crDropItem(DRAG, WatchActions),\r\n      _handlerDragEnterItem: _crDragEnterItem(DRAG),\r\n      _handlerDragOverItem: _handlerDragOverItem,\r\n      _handlerDragLeaveItem: _handlerDragLeaveItem\r\n    })\r\n  };\r\n}\r\n\r\nexport default withDnDItem\r\n"]}