{"version":3,"sources":["../../../src/components/zhn-moleculs/DynamicMenuBrowser.jsx"],"names":["S","BROWSER","paddingRight","SCROLL_PANE","overflowY","height","SPINNER_LOADING","position","display","textAlign","margin","marginTop","width","ROOT_MENU","paddingLeft","DynamicMenuBrowser","props","_onStore","actionType","id","showAction","browserId","setState","isShow","_loadMenu","url","onError","fetch","then","response","status","json","isLoading","menuModel","err","isLoadingFailed","_handleHide","state","componentDidMount","store","listen","unsubscribe","componetWillUnmaount","_renderMenuParts","styleConfig","restProps","menu","items","map","menuPart","index","render","TS","caption","children","BROWSER_CAPTION","CL_SCROLL_PANE","Component","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport A from '../zhn-atoms/Atoms'\r\nimport MenuPart from './MenuPart'\r\n\r\nconst S = {\r\n  BROWSER: {\r\n    paddingRight: '0px'\r\n  },\r\n  SCROLL_PANE: {\r\n    overflowY: 'auto',\r\n    height: '92%',\r\n    paddingRight: '10px',\r\n    //paddingLeft: '4px'\r\n  },\r\n  SPINNER_LOADING: {\r\n    position: 'relative',\r\n    display: 'block',\r\n    textAlign: 'middle',\r\n    margin: '0 auto',\r\n    marginTop: '32px',\r\n    width: '32px',\r\n    height: '32px'\r\n  },\r\n  ROOT_MENU: {\r\n    paddingLeft: '4px'\r\n  }\r\n}\r\n\r\nclass DynamicMenuBrowser extends Component {\r\n\r\n  static defaultProps = {\r\n    onError: ()=>{}\r\n  }\r\n\r\n  constructor(props){\r\n    super()\r\n    this.state = {\r\n      isShow: true,\r\n      isLoading: true,\r\n      isLoadingFailed: false,\r\n      menuModel: {}\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount(){\r\n    const { store={} } = this.props;\r\n    if (typeof store.listen === 'function'){\r\n      this.unsubscribe = store.listen(this._onStore)\r\n    }\r\n    this._loadMenu()\r\n  }\r\n  componetWillUnmaount(){\r\n    if (this.unsubscribe) {\r\n      this.unsubscribe()\r\n    }\r\n  }\r\n\r\n\r\n  _onStore = (actionType, id) => {\r\n    const { showAction, browserId } = this.props;\r\n    if (actionType === showAction && id === browserId ){\r\n       this.setState({ isShow: true })\r\n    }\r\n  }\r\n\r\n\r\n  _loadMenu = () => {\r\n    const { url, onError } = this.props;\r\n    fetch(url)\r\n      .then(response => {\r\n          const { status } = response;\r\n          if (status>=200 && status<400){\r\n            return response.json();\r\n          } else {\r\n            throw { status, url };\r\n          }\r\n      })\r\n      .then(json => {\r\n         this.setState({ isLoading: false, menuModel: json })\r\n      })\r\n      .catch(err => {\r\n          this.setState({ isLoadingFailed: true, isLoading: false })\r\n          onError(err)\r\n      })\r\n  }\r\n\r\n  _handleHide = () => {\r\n    this.setState({ isShow: false })\r\n  }\r\n\r\n  _renderMenuParts({ styleConfig, menuModel, restProps }){\r\n    const { menu=[], items={} } = menuModel;\r\n    return menu.map((menuPart, index) => {\r\n      return (\r\n        <MenuPart\r\n          {...menuPart}\r\n          key={index}\r\n          hmItems={items}\r\n          styleConfig={styleConfig}\r\n          {...restProps}\r\n        />\r\n      );\r\n    })\r\n  }\r\n\r\n  render(){\r\n    const { styleConfig:TS={},\r\n            caption,\r\n            children, ...restProps } = this.props\r\n        , { isShow, isLoading, isLoadingFailed, menuModel } = this.state;\r\n    return (\r\n      <A.Browser\r\n         isShow={isShow}\r\n         style={{...S.BROWSER, ...TS.BROWSER}}\r\n       >\r\n        <A.BrowserCaption\r\n          rootStyle={TS.BROWSER_CAPTION}\r\n          caption={caption}\r\n          onClose={this._handleHide}\r\n        />\r\n        {\r\n          isLoading &&\r\n          <A.SpinnerLoading\r\n               style={S.SPINNER_LOADING}\r\n          />\r\n        }\r\n        {\r\n          isLoadingFailed &&\r\n          <A.SpinnerLoading\r\n             style={S.SPINNER_LOADING}\r\n             isFailed={true}\r\n           />\r\n         }\r\n        <A.ScrollPane\r\n           className={TS.CL_SCROLL_PANE}\r\n           style={S.SCROLL_PANE}\r\n        >\r\n          {this._renderMenuParts({ styleConfig: TS, menuModel, restProps})}\r\n          {children}\r\n        </A.ScrollPane>\r\n      </A.Browser>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DynamicMenuBrowser\r\n"],"file":"DynamicMenuBrowser.js"}